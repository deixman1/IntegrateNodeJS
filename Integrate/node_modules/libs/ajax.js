var XMLHttpRequest = require("xmlhttprequest").XMLHttpRequest;
exports.GET = function (url, params) {
    var pairs = [];
    for (key in params)
    {
        pairs[pairs.length] = key + '=' + params[key];
    }
    if (pairs.length) {
        url = url + (url.indexOf('?') == -1 ? '?' : '&') + pairs.join('&');
    }
    //console.log(url);
    var xhr = new XMLHttpRequest();
    xhr.open('GET', url, true);
    xhr.onreadystatechange = function () {
        if (xhr.readyState == 4) {
            //console.log(xhr.responseText);
            obj = JSON.parse(xhr.responseText);
            console.log(obj);
            //exports.GET(
            //    'https://' + obj.response.server,
            //    {
            //        key: obj.response.key,
            //        ts: obj.response.ts,
            //        act: 'a_check',
            //        wait: 25,
            //        mode: 2,
            //        version: 2
            //    }
            //);
            //https://".$_REQUEST['server']."?act=a_check&key=".$_REQUEST['key']."&ts=".$_REQUEST['ts']."&wait=25&mode=2&version=2
        }
    }
    xhr.send("");
}